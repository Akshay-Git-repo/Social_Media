<link rel="stylesheet" href="/css/home.css">

<h1><%=locals.title%></h1>


<section id="feed-posts">

    <h4>Posts<h4>
        <form action="/post/create" id="new-post-feed" method="POST">

            <textarea name="content" rows="3" cols="30" placeholder="Type Here.."></textarea>
            <input type="submit" value="Post">

        </form>

            
            <ul id="all-posts" style="list-style-type:none;">
                <% Posts.forEach(function(posted_data) { %>
                    <div id="posted_content">
                        <li><%= posted_data.content %> </li>
                    </div>
                    <div id="post_created_time">
                        <li><%= posted_data.createdAt %></li>
                    </div>
                    <div id="posted_by">
                        <li>Created By: <%= user.email%> </li>
                    </div>

                   
                    <div class="post-comment">
                        <%if(locals.user){ %>

                            <form action="/comments/create" method="POST">
                                <input type="text" name="content" placeholder="Type here to add Comment">
                                <input type="hidden" name="post" value="<%=posted_data._id%>">
                                <input type="submit" value="Add Comment">
                            </form>


                        <%}%>

                        <button onclick="myFunction()">Comments</button>
                        <div class="post-comments-list">
                            <ul id="post-comments-<%=posted_data._id%>" style="list-style-type:none;">
                                <% for (comment of posted_data.comments){%>


                                    <li>
                                        <%=comment.content%>
                                        
                                        <br>
                                        <small><%=comment.user.name%></small>
                                    </li>

                                    
                                    <%}%>
                            </ul>



                        </div>

                    </div>



                <% }); %>
                

            </ul>
            
    </section>



